<%
  id ||= "file-upload-#{SecureRandom.hex(4)}"
  value ||= nil
  accept ||= nil
  data ||= nil

  label ||= nil
  hint ||= nil
  error_message ||= nil
  hint_id = "hint-#{SecureRandom.hex(4)}" if hint
  error_message_id = "error-message-#{SecureRandom.hex(4)}" if error_message

  css_classes = %w(gem-c-file-upload govuk-file-upload)
  css_classes << "govuk-file-upload--error" if error_message
  form_group_css_classes = %w(govuk-form-group)
  form_group_css_classes << "govuk-form-group--error" if error_message

  aria_described_by ||= nil
  if hint || error_message
    aria_described_by = []
    aria_described_by << hint_id if hint
    aria_described_by << error_message_id if error_message
    aria_described_by = aria_described_by.join(" ")
  end
%>

<%= content_tag :div, class: form_group_css_classes do %>
  <% if label %>
    <%= render "govuk_publishing_components/components/label", { html_for: id, text: label[:text] }.merge(label) %>
  <% end %>

  <% if hint %>
    <%= render "govuk_publishing_components/components/hint", {
      id: hint_id,
      text: hint
    } %>
  <% end %>

  <% if error_message %>
    <%= render "govuk_publishing_components/components/error_message", {
      id: error_message_id,
      text: error_message
    } %>
  <% end %>

  <%= tag.input name: name,
    type: "file",
    value: value,
    class: css_classes,
    id: id,
    data: data,
    accept: accept,
    aria: {
      describedby: aria_described_by
    } %>
<% end %>
